<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:spring-form="http://www.springframework.org/tags/form"
          xmlns:security="http://www.springframework.org/security/tags"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:x="http://java.sun.com/jsp/jstl/xml"
          xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
          xmlns:tiles="http://tiles.apache.org/tags-tiles"
          xmlns:fn="http://java.sun.com/jsp/jstl/functions" version="2.0">
    <jsp:directive.page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8"/>

    <c:choose>
        <c:when test="${platform == true}">
            <spring:message var="titleName" code="page.platforms.name" text="Platforms"/>
            <c:set var="tableId" value="${organization.id}_platformsTable"/>
            <c:set var="pageDivId" value="${organization.id}_platforms"/>
            <c:set var="iconClass" value="platform"/>
        </c:when>
        <c:otherwise>
            <spring:message var="titleName" code="page.applications.name" text="Applications"/>
            <c:set var="tableId" value="${organization.id}_applicationsTable"/>
            <c:set var="pageDivId" value="${organization.id}_applications"/>
            <c:set var="iconClass" value="application"/>
        </c:otherwise>
    </c:choose>

    <div id="${pageDivId}">
        <div class="page_header ${iconClass}">
            <div class="titleName">${titleName}</div>
            <div class="newEntity">
                <security:authorize ifAllGranted="ROLE_ADMINISTRATOR">
                    <a href="javascript:bindFormLink({url: '/secure/organization/application/edit.admin?owner=${organization.id}&amp;platform=${platform}', id: '${tableId}', cssClass: 'jqmWindow'})" title="${altNew}"><spring:message code="entity.new" text="NEW"/></a>
                </security:authorize>
            </div>
            <div class="searchField">
                <input type="text" name="search" onkeyup="replaceHtmlContent({url:'/secure/organization/application/search.admin?id=${organization.id}&amp;view=organization.applications.data&amp;platform=${platform}&amp;name=' + this.value, id: '${tableId}'});" class="textInput"/>
            </div>
        </div>

        <div class="contentSeparator"><!----></div>
        
        <jsp:include page="organization_applications_data.jspx" flush="true"/>
    </div>
</jsp:root>